<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="" productName="CODESYS" productVersion="CODESYS V3.5 SP15" creationDateTime="2019-10-26T23:04:51.9961806" />
  <contentHeader name="robin.project" modificationDateTime="2019-10-25T16:14:13.4474839">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation />
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes />
    <pous>
      <pou name="Robin" pouType="functionBlock">
        <interface>
          <localVars constant="true">
            <variable name="SHM_OWNER">
              <type>
                <string />
              </type>
              <initialValue>
                <simpleValue value="'criis'" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">CONFIG</xhtml>
              </documentation>
            </variable>
            <variable name="CHOWN_CMD">
              <type>
                <string />
              </type>
              <initialValue>
                <simpleValue value="CONCAT(CONCAT(CONCAT(CONCAT('chown ', shm_owner), ':'), shm_owner), ' /dev/shm/')" />
              </initialValue>
            </variable>
            <variable name="SEM_TIMEOUT">
              <type>
                <UDINT />
              </type>
              <initialValue>
                <simpleValue value="1000" />
              </initialValue>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"> in ms (16#FFFFFFFF = inf)</xhtml>
              </documentation>
            </variable>
          </localVars>
          <localVars>
            <variable name="data_ptr">
              <type>
                <pointer>
                  <baseType>
                    <BYTE />
                  </baseType>
                </pointer>
              </type>
            </variable>
            <variable name="data_size">
              <type>
                <derived name="__UXINT" />
              </type>
            </variable>
            <variable name="semaphore_hdl">
              <type>
                <derived name="RTS_IEC_HANDLE" />
              </type>
            </variable>
            <variable name="shared_memory_hdl">
              <type>
                <derived name="RTS_IEC_HANDLE" />
              </type>
            </variable>
            <variable name="result">
              <type>
                <derived name="RTS_IEC_RESULT" />
              </type>
            </variable>
            <variable name="bytes">
              <type>
                <derived name="__UXINT" />
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml" />
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="FB_Init">
              <interface>
                <returnType>
                  <BOOL />
                </returnType>
                <inputVars>
                  <variable name="bInitRetains">
                    <type>
                      <BOOL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> TRUE: the retain variables are initialized (reset warm / reset cold)</xhtml>
                    </documentation>
                  </variable>
                  <variable name="bInCopyCode">
                    <type>
                      <BOOL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> TRUE: the instance will be copied to the copy code afterward (online change)</xhtml>
                    </documentation>
                  </variable>
                  <variable name="name">
                    <type>
                      <string />
                    </type>
                  </variable>
                  <variable name="ptr">
                    <type>
                      <pointer>
                        <baseType>
                          <BYTE />
                        </baseType>
                      </pointer>
                    </type>
                  </variable>
                  <variable name="size">
                    <type>
                      <derived name="__UXINT" />
                    </type>
                  </variable>
                </inputVars>
                <localVars>
                  <variable name="sem_chown_cmd">
                    <type>
                      <string />
                    </type>
                    <initialValue>
                      <simpleValue value="CONCAT(CONCAT(CHOWN_CMD, 'sem.'), name)" />
                    </initialValue>
                  </variable>
                  <variable name="shm_chown_cmd">
                    <type>
                      <string />
                    </type>
                    <initialValue>
                      <simpleValue value="CONCAT(CHOWN_CMD, name)" />
                    </initialValue>
                  </variable>
                </localVars>
                <documentation>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_Init is always available implicitly and it is used primarily for initialization.
The return value is not evaluated. For a specific influence, you can also declare the
methods explicitly and provide additional code there with the standard initialization
code. You can evaluate the return value.</xhtml>
                </documentation>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">semaphore_hdl := SysSemProcessCreate(name, ADR(result));
// result := SysSemProcessDelete(semaphore_hdl);
// semaphore_hdl := SysSemProcessCreate(name, ADR(result));
//TODO? wait for semaphore_hdl
data_ptr := ptr;
data_size := size;
// data_ptr := data.pValue;
// data_size := DINT_TO___UXINT(data.diSize);
shared_memory_hdl := SysSharedMemoryCreate(name, 0, ADR(data_size), ADR(result));
SysProcessExecuteCommand(sem_chown_cmd, ADR(result));
SysProcessExecuteCommand(shm_chown_cmd, ADR(result));
</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="FB_Exit">
              <interface>
                <returnType>
                  <BOOL />
                </returnType>
                <inputVars>
                  <variable name="bInCopyCode">
                    <type>
                      <BOOL />
                    </type>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"> TRUE: the exit method is called in order to leave the instance which will be copied afterwards (online change).  </xhtml>
                    </documentation>
                  </variable>
                </inputVars>
                <documentation>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">FB_Exit must be implemented explicitly. If there is an implementation, then the
method is called before the controller removes the code of the function block instance
(implicit call). The return value is not evaluated.</xhtml>
                </documentation>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">// IF NOT bInCopyCode THEN
// 	result := SysSemProcessEnter(semaphore_hdl, SEM_TIMEOUT);
	result := SysSharedMemoryClose(shared_memory_hdl);
	result := SysSharedMemoryDelete(shared_memory_hdl);
	result := SysSemProcessDelete(semaphore_hdl);
// END_IF
</xhtml>
                </ST>
              </body>
              <addData />
            </Method>
          </data>
        </addData>
      </pou>
      <pou name="RobinReader" pouType="functionBlock">
        <interface>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/pouinheritance" handleUnknown="implementation">
              <Inheritance>
                <Extends>Robin</Extends>
              </Inheritance>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">result := SysSemProcessEnter(semaphore_hdl, SEM_TIMEOUT);
IF result &lt;&gt; Errors.ERR_OK THEN RETURN; END_IF
bytes := SysSharedMemoryRead(shared_memory_hdl, 0, data_ptr, data_size, ADR(result));
result := SysSemProcessLeave(semaphore_hdl);
</xhtml>
          </ST>
        </body>
        <addData />
      </pou>
      <pou name="RobinWriter" pouType="functionBlock">
        <interface>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/pouinheritance" handleUnknown="implementation">
              <Inheritance>
                <Extends>Robin</Extends>
              </Inheritance>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">result := SysSemProcessEnter(semaphore_hdl, SEM_TIMEOUT);
IF result &lt;&gt; Errors.ERR_OK THEN RETURN; END_IF
bytes := SysSharedMemoryWrite(shared_memory_hdl, 0, data_ptr, data_size, ADR(result));
result := SysSemProcessLeave(semaphore_hdl);
</xhtml>
          </ST>
        </body>
        <addData />
      </pou>
    </pous>
  </types>
  <instances>
    <configurations>
      <configuration name="Device">
        <resource name="Application">
          <task name="MainTask" interval="PT0.01S" priority="1">
            <pouInstance name="MAIN" typeName="">
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml" />
              </documentation>
            </pouInstance>
            <pouInstance name="ROS_PRG" typeName="">
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml" />
              </documentation>
            </pouInstance>
            <addData>
              <data name="http://www.3s-software.com/plcopenxml/tasksettings" handleUnknown="implementation">
                <TaskSettings KindOfTask="Cyclic" Interval="10" IntervalUnit="ms" WithinSPSTimeSlicing="true">
                  <Watchdog Enabled="false" TimeUnit="ms" Sensitivity="1" />
                </TaskSettings>
              </data>
            </addData>
          </task>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
              <dataType name="TestStruct">
                <baseType>
                  <struct>
                    <variable name="var_bool">
                      <type>
                        <BOOL />
                      </type>
                      <initialValue>
                        <simpleValue value="TRUE" />
                      </initialValue>
                    </variable>
                    <variable name="var_uint16">
                      <type>
                        <UINT />
                      </type>
                      <initialValue>
                        <simpleValue value="54321" />
                      </initialValue>
                    </variable>
                    <variable name="var_struct">
                      <type>
                        <derived name="TestSubStruct" />
                      </type>
                    </variable>
                  </struct>
                </baseType>
                <addData />
              </dataType>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/datatype" handleUnknown="implementation">
              <dataType name="TestSubStruct">
                <baseType>
                  <struct>
                    <variable name="var_float64_1">
                      <type>
                        <LREAL />
                      </type>
                      <initialValue>
                        <simpleValue value="0.123456789" />
                      </initialValue>
                    </variable>
                    <variable name="var_float64_2">
                      <type>
                        <LREAL />
                      </type>
                      <initialValue>
                        <simpleValue value="-10.9876554321" />
                      </initialValue>
                    </variable>
                  </struct>
                </baseType>
                <addData />
              </dataType>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
              <pou name="MAIN" pouType="program">
                <interface />
                <body>
                  <ST>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">ROS_PRG.double_to_ros := ROS_PRG.double_to_codesys;
ROS_PRG.struct_to_ros := ROS_PRG.struct_to_codesys;
</xhtml>
                  </ST>
                </body>
                <addData />
              </pou>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/pou" handleUnknown="implementation">
              <pou name="ROS_PRG" pouType="program">
                <interface>
                  <inputVars>
                    <variable name="double_to_ros">
                      <type>
                        <LREAL />
                      </type>
                    </variable>
                    <variable name="struct_to_ros">
                      <type>
                        <derived name="TestStruct" />
                      </type>
                    </variable>
                  </inputVars>
                  <outputVars>
                    <variable name="double_to_codesys">
                      <type>
                        <LREAL />
                      </type>
                    </variable>
                    <variable name="struct_to_codesys">
                      <type>
                        <derived name="TestStruct" />
                      </type>
                    </variable>
                  </outputVars>
                  <localVars>
                    <variable name="robin_double_to_ros">
                      <type>
                        <derived name="RobinWriter" />
                      </type>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/inputassignments" handleUnknown="implementation">
                          <InputAssignments>
                            <InputAssignment>
                              <Value>'double_to_ros'</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>ADR(double_to_ros)</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>SIZEOF(double_to_ros)</Value>
                            </InputAssignment>
                          </InputAssignments>
                        </data>
                        <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                          <Attributes>
                            <Attribute Name="old_input_assignments" Value="" />
                          </Attributes>
                        </data>
                      </addData>
                    </variable>
                    <variable name="robin_struct_to_ros">
                      <type>
                        <derived name="RobinWriter" />
                      </type>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/inputassignments" handleUnknown="implementation">
                          <InputAssignments>
                            <InputAssignment>
                              <Value>'struct_to_ros'</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>ADR(struct_to_ros)</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>SIZEOF(struct_to_ros)</Value>
                            </InputAssignment>
                          </InputAssignments>
                        </data>
                        <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                          <Attributes>
                            <Attribute Name="old_input_assignments" Value="" />
                          </Attributes>
                        </data>
                      </addData>
                    </variable>
                    <variable name="robin_double_to_codesys">
                      <type>
                        <derived name="RobinReader" />
                      </type>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/inputassignments" handleUnknown="implementation">
                          <InputAssignments>
                            <InputAssignment>
                              <Value>'double_to_codesys'</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>ADR(double_to_codesys)</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>SIZEOF(double_to_codesys)</Value>
                            </InputAssignment>
                          </InputAssignments>
                        </data>
                        <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                          <Attributes>
                            <Attribute Name="old_input_assignments" Value="" />
                          </Attributes>
                        </data>
                      </addData>
                    </variable>
                    <variable name="robin_struct_to_codesys">
                      <type>
                        <derived name="RobinReader" />
                      </type>
                      <addData>
                        <data name="http://www.3s-software.com/plcopenxml/inputassignments" handleUnknown="implementation">
                          <InputAssignments>
                            <InputAssignment>
                              <Value>'struct_to_codesys'</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>ADR(struct_to_codesys)</Value>
                            </InputAssignment>
                            <InputAssignment>
                              <Value>SIZEOF(struct_to_codesys)</Value>
                            </InputAssignment>
                          </InputAssignments>
                        </data>
                        <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                          <Attributes>
                            <Attribute Name="old_input_assignments" Value="" />
                          </Attributes>
                        </data>
                      </addData>
                    </variable>
                  </localVars>
                </interface>
                <body>
                  <ST>
                    <xhtml xmlns="http://www.w3.org/1999/xhtml">robin_double_to_ros();
robin_double_to_codesys();
robin_struct_to_ros();
robin_struct_to_codesys();
</xhtml>
                  </ST>
                </body>
                <addData />
              </pou>
            </data>
            <data name="http://www.3s-software.com/plcopenxml/libraries" handleUnknown="implementation">
              <Libraries>
                <Library Name="#IoStandard" Namespace="IoStandard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="true" DefaultResolution="IoStandard, 3.5.15.0 (System)" />
                <Library Name="#3SLicense" Namespace="_3S_LICENSE" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="3SLicense, 0.0.0.0 (3S - Smart Software Solutions GmbH)" ResolverGuid="97c3b452-d9fa-4ac2-9d0c-3d420aa6d95b" />
                <Library Name="#CAA Device Diagnosis" Namespace="DED" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="CAA Device Diagnosis, 3.5.15.0 (CAA Technical Workgroup)" />
                <Library Name="#BreakpointLogging" Namespace="BPLog" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="Breakpoint Logging Functions, 3.5.5.0 (3S - Smart Software Solutions GmbH)" />
                <Library Name="#SM3_Basic" Namespace="SM3_Basic" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="SM3_Basic, 4.6.0.0 (3S - Smart Software Solutions GmbH)" />
                <Library Name="#SM3_CNC" Namespace="SM3_CNC" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="true" LinkAllContent="false" DefaultResolution="SM3_CNC, 4.6.0.0 (3S - Smart Software Solutions GmbH)" />
                <addData />
              </Libraries>
            </data>
          </addData>
        </resource>
        <addData>
          <data name="Device" handleUnknown="discard">
            <Device xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="">
              <DeviceType>
                <DeviceIdentification>
                  <Type>4102</Type>
                  <Id>0000 0005</Id>
                  <Version>3.5.15.0</Version>
                </DeviceIdentification>
                <Connector moduleType="256" interface="Common.PCI" connectorId="0">
                  <HostParameterSet />
                </Connector>
                <Connector moduleType="1279" interface="Common.SoftMotion.General" connectorId="1">
                  <HostParameterSet />
                </Connector>
                <DeviceParameterSet />
              </DeviceType>
            </Device>
          </data>
          <data name="configurations" handleUnknown="discard">
            <configurations>
              <configuration name="SoftMotion General Axis Pool">
                <addData>
                  <data name="ExplicitConnector" handleUnknown="discard">
                    <ExplicitConnector connectorID="1" />
                  </data>
                </addData>
              </configuration>
            </configurations>
          </data>
        </addData>
      </configuration>
    </configurations>
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/libraries" handleUnknown="implementation">
      <Libraries>
        <Library Name="SysSemProcess, 3.5.5.0 (System)" Namespace="SysSemProcess" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
        <Library Name="SysShm, 3.5.8.0 (System)" Namespace="SysShm" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
        <Library Name="SysTypes Interfaces, 3.5.2.0 (System)" Namespace="SysTypes" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
        <Library Name="CmpErrors, 3.3.1.40 (System)" Namespace="CmpErrors" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
        <Library Name="SysProcess, 3.5.7.0 (System)" Namespace="SysProcess" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
        <Library Name="Standard, 3.5.15.0 (System)" Namespace="Standard" HideWhenReferencedAsDependency="false" PublishSymbolsInContainer="false" SystemLibrary="false" LinkAllContent="false" />
        <addData />
      </Libraries>
    </data>
  </addData>
</project>